!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=34)}([function(t,e,r){t.exports=!r(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(e.memoize=function t(e,r){if("function"!=typeof e||r&&"function"!=typeof r)throw new TypeError("Expected a function");var n=function t(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var u=r?r.apply(void 0,o):o[0],s=t.cache;if(s.has(u))return s.get(u);var a=e.apply(void 0,o);return t.cache=s.set(u,a)||s,a};return n.cache=new t.Cache,n}).Cache=Map},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(17),o=r(16),i=r(14),u=Object.defineProperty;e.f=r(0)?Object.defineProperty:function(t,e,r){if(n(t),e=i(e,!0),n(r),o)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e){var r=t.exports={version:"2.5.6"};"number"==typeof __e&&(__e=r)},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){t.exports=r(28)},function(t,e,r){(function(e,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */
t.exports=function(){"use strict";function t(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,i=void 0,u=void 0,s=function(t,e){d[o]=t,d[o+1]=e,2===(o+=2)&&(u?u(y):_())},a="undefined"!=typeof window?window:void 0,c=a||{},f=c.MutationObserver||c.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(y,1)}}var d=new Array(1e3);function y(){for(var t=0;t<o;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}o=0}var v,m,w,b,_=void 0;function g(t,e){var r=this,n=new this.constructor(T);void 0===n[E]&&N(n);var o=r._state;if(o){var i=arguments[o-1];s(function(){return U(o,n,i,r._result)})}else F(r,n,t,e);return n}function x(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(T);return S(e,t),e}_=l?function(){return e.nextTick(y)}:f?(m=0,w=new f(y),b=document.createTextNode(""),w.observe(b,{characterData:!0}),function(){b.data=m=++m%2}):h?((v=new MessageChannel).port1.onmessage=y,function(){return v.port2.postMessage(0)}):void 0===a?function(){try{var t=Function("return this")().require("vertx");return void 0===(i=t.runOnLoop||t.runOnContext)?p():function(){i(y)}}catch(t){return p()}}():p();var E=Math.random().toString(36).substring(2);function T(){}var A=void 0,O=1,j=2,P={error:null};function L(t){try{return t.then}catch(t){return P.error=t,P}}function B(e,r,n){var o,i,u,a;r.constructor===e.constructor&&n===g&&r.constructor.resolve===x?(u=e,(a=r)._state===O?I(u,a._result):a._state===j?R(u,a._result):F(a,void 0,function(t){return S(u,t)},function(t){return R(u,t)})):n===P?(R(e,P.error),P.error=null):void 0===n?I(e,r):t(n)?(o=r,i=n,s(function(t){var e=!1,r=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(i,o,function(r){e||(e=!0,o!==r?S(t,r):I(t,r))},function(r){e||(e=!0,R(t,r))},t._label);!e&&r&&(e=!0,R(t,r))},e)):I(e,r)}function S(t,e){var r,n;t===e?R(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=e),null===r||"object"!==n&&"function"!==n?I(t,e):B(t,e,L(e)))}function k(t){t._onerror&&t._onerror(t._result),M(t)}function I(t,e){t._state===A&&(t._result=e,t._state=O,0!==t._subscribers.length&&s(M,t))}function R(t,e){t._state===A&&(t._state=j,t._result=e,s(k,t))}function F(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+O]=r,o[i+j]=n,0===i&&t._state&&s(M,t)}function M(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,u=0;u<e.length;u+=3)n=e[u],o=e[u+r],n?U(r,n,o,i):o(i);t._subscribers.length=0}}function U(e,r,n,o){var i=t(n),u=void 0,s=void 0,a=void 0,c=void 0;if(i){if((u=function(t,e){try{return t(e)}catch(t){return P.error=t,P}}(n,o))===P?(c=!0,s=u.error,u.error=null):a=!0,r===u)return void R(r,new TypeError("A promises callback cannot return that same promise."))}else u=o,a=!0;r._state!==A||(i&&a?S(r,u):c?R(r,s):e===O?I(r,u):e===j&&R(r,u))}var C=0;function N(t){t[E]=C++,t._state=void 0,t._result=void 0,t._subscribers=[]}var D=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(T),this.promise[E]||N(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&I(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===x){var o=L(t);if(o===g&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===G){var i=new r(T);B(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===A&&(this._remaining--,t===j?R(n,r):this._result[e]=r),0===this._remaining&&I(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;F(t,void 0,function(t){return r._settledAt(O,e,t)},function(t){return r._settledAt(j,e,t)})},t}(),G=function(){function e(t){this[E]=C++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){S(t,e)},function(e){R(t,e)})}catch(e){R(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return G.prototype.then=g,G.all=function(t){return new D(this,t).promise},G.race=function(t){var e=this;return n(t)?new e(function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},G.resolve=x,G.reject=function(t){var e=new this(T);return R(e,t),e},G._setScheduler=function(t){u=t},G._setAsap=function(t){s=t},G._asap=s,G.polyfill=function(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=G},G.Promise=G}()}).call(this,r(32),r(31))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getExpiresIn=void 0;var n,o=(n=r(7))&&n.__esModule?n:{default:n},i=r(2),u=["ridibooks.com","dev.ridi.io","dev.ridi.com"],s=(0,i.memoize)(function(){for(var t=window.location.host,e=0;e<u.length;e+=1)if(t.includes(u[e]))return u[e];throw new Error("This site not allowed")},function(){return"account-domain"});e.getExpiresIn=function(){var t,e;return o.default.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.default.awrap(fetch("https://account."+s()+"/ridi/token/",{method:"POST",credentials:"include"}));case 2:return t=r.sent,r.next=5,o.default.awrap(t.json());case 5:return e=r.sent,r.abrupt("return",e.expires_in);case 7:case"end":return r.stop()}},null,void 0)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.DEFAULT_INTERVAL_MARGIN=300,o=e.MICROSECONDS=1e3;e.calcInterval=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n;return t<e?0:t*o-e*o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var o=r(9);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var i=r(2);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(1);t.exports=function(t,e){if(!n(t))return t;var r,o;if(e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!n(o=r.call(t)))return o;if(!e&&"function"==typeof(r=t.toString)&&!n(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(1),o=r(6).document,i=n(o)&&n(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,r){t.exports=!r(0)&&!r(3)(function(){return 7!=Object.defineProperty(r(15)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){var n=r(1);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){var n=r(4),o=r(13);t.exports=r(0)?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(19);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(6),o=r(5),i=r(20),u=r(18),s=r(12),a="prototype",c=function(t,e,r){var f,l,h,p=t&c.F,d=t&c.G,y=t&c.S,v=t&c.P,m=t&c.B,w=t&c.W,b=d?o:o[e]||(o[e]={}),_=b[a],g=d?n:y?n[e]:(n[e]||{})[a];for(f in d&&(r=e),r)(l=!p&&g&&void 0!==g[f])&&s(b,f)||(h=l?g[f]:r[f],b[f]=d&&"function"!=typeof g[f]?r[f]:m&&l?i(h,n):w&&g[f]==h?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[a]=t[a],e}(h):v&&"function"==typeof h?i(Function.call,h):h,v&&((b.virtual||(b.virtual={}))[f]=h,t&c.R&&_&&!_[f]&&u(_,f,h)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,r){var n=r(21);n(n.S+n.F*!r(0),"Object",{defineProperty:r(4).f})},function(t,e,r){r(22);var n=r(5).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e,r){t.exports={default:r(23),__esModule:!0}},function(t,e,r){"use strict";e.__esModule=!0;var n,o=(n=r(24))&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){(function(e){!function(r){"use strict";var n,o=Object.prototype,i=o.hasOwnProperty,u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",a=u.asyncIterator||"@@asyncIterator",c=u.toStringTag||"@@toStringTag",f="object"==typeof t,l=r.regeneratorRuntime;if(l)f&&(t.exports=l);else{(l=r.regeneratorRuntime=f?t.exports:{}).wrap=g;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={},m={};m[s]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(k([])));b&&b!==o&&i.call(b,s)&&(m=b);var _=A.prototype=E.prototype=Object.create(m);T.prototype=_.constructor=A,A.constructor=T,A[c]=T.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===T||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(_),t},l.awrap=function(t){return{__await:t}},O(j.prototype),j.prototype[a]=function(){return this},l.AsyncIterator=j,l.async=function(t,e,r,n){var o=new j(g(t,e,r,n));return l.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},O(_),_[c]="Generator",_[s]=function(){return this},_.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(B),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return s.type="throw",s.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var o=this.tryEntries.length-1;0<=o;--o){var u=this.tryEntries[o],s=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var a=i.call(u,"catchLoc"),c=i.call(u,"finallyLoc");if(a&&c){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(a){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;B(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function g(t,e,r,n){var o,i,u,s,a=e&&e.prototype instanceof E?e:E,c=Object.create(a.prototype),f=new S(n||[]);return c._invoke=(o=t,i=r,u=f,s=h,function(t,e){if(s===d)throw new Error("Generator is already running");if(s===y){if("throw"===t)throw e;return I()}for(u.method=t,u.arg=e;;){var r=u.delegate;if(r){var n=P(r,u);if(n){if(n===v)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(s===h)throw s=y,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);s=d;var a=x(o,i,u);if("normal"===a.type){if(s=u.done?y:p,a.arg===v)continue;return{value:a.arg,done:u.done}}"throw"===a.type&&(s=y,u.method="throw",u.arg=a.arg)}}),c}function x(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function E(){}function T(){}function A(){}function O(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function j(t){var r;this._invoke=function(n,o){function u(){return new e(function(r,u){!function r(n,o,u,s){var a=x(t[n],t,o);if("throw"!==a.type){var c=a.arg,f=c.value;return f&&"object"==typeof f&&i.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,u,s)},function(t){r("throw",t,u,s)}):e.resolve(f).then(function(t){c.value=t,u(c)},s)}s(a.arg)}(n,o,r,u)})}return r=r?r.then(u,u):u()}}function P(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,P(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=x(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,v;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function B(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function k(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())}).call(this,r(8).Promise)},function(t,e,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(27),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(r(7)),o=s(r(26)),i=s(r(25)),u=r(11);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,o.default)(this,t),this.timeoutId=null,this.retryCount=0,this._loop=this._loop.bind(this)}return(0,i.default)(t,[{key:"start",value:function(){this.isRunning()||(this.timeoutId=setTimeout(this._loop,0))}},{key:"stop",value:function(){clearTimeout(this.timeoutId),this.timeoutId=null}},{key:"isRunning",value:function(){return null!==this.timeoutId}},{key:"_loop",value:function(){var t,e;return n.default.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=null,r.prev=1,r.next=4,n.default.awrap((0,u.getExpiresIn)());case 4:t=r.sent,r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(1),this.retryCount<3?(this.retryCount+=1,this.timeoutId=setTimeout(this._loop,5e3)):this.stop(),r.abrupt("return");case 11:e=(0,u.calcInterval)(t),this.retryCount=0,this.timeoutId=setTimeout(this._loop,e);case 14:case"end":return r.stop()}},null,this,[[1,7]])}}]),t}();e.default=a},function(t,e,r){"use strict";var n;(new(((n=r(29))&&n.__esModule?n:{default:n}).default)).start()},function(zk,Ak){var Bk;Bk=function(){return this}();try{Bk=Bk||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(Bk=window)}zk.exports=Bk},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var a,c=[],f=!1,l=-1;function h(){f&&a&&(f=!1,a.length?c=a.concat(c):l=-1,c.length&&p())}function p(){if(!f){var t=s(h);f=!0;for(var e=c.length;e;){for(a=c,c=[];++l<e;)a&&a[l].run();l=-1,e=c.length}a=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||f||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,r){(function(t){!function(e){"use strict";if(!e.fetch){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in e,u="ArrayBuffer"in e;if(u)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},c=ArrayBuffer.isView||function(t){return t&&-1<s.indexOf(Object.prototype.toString.call(t))};y.prototype.append=function(t,e){t=h(t),e=p(e);var r=this.map[t];this.map[t]=r?r+","+e:e},y.prototype.delete=function(t){delete this.map[h(t)]},y.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},y.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},y.prototype.set=function(t,e){this.map[h(t)]=p(e)},y.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},y.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),d(t)},y.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),d(t)},y.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),d(t)},n&&(y.prototype[Symbol.iterator]=y.prototype.entries);var f=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},_.call(g.prototype),_.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var l=[301,302,303,307,308];E.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.Headers=y,e.Request=g,e.Response=E,e.fetch=function(e,r){return new t(function(t,n){var i=new g(e,r),u=new XMLHttpRequest;u.onload=function(){var e,r,n={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",r=new y,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var o=e.join(":").trim();r.append(n,o)}}),r)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var o="response"in u?u.response:u.responseText;t(new E(o,n))},u.onerror=function(){n(new TypeError("Network request failed"))},u.ontimeout=function(){n(new TypeError("Network request failed"))},u.open(i.method,i.url,!0),"include"===i.credentials?u.withCredentials=!0:"omit"===i.credentials&&(u.withCredentials=!1),"responseType"in u&&o&&(u.responseType="blob"),i.headers.forEach(function(t,e){u.setRequestHeader(e,t)}),u.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function p(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function y(t){this.map={},t instanceof y?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function v(e){if(e.bodyUsed)return t.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new t(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function w(t){var e=new FileReader,r=m(e);return e.readAsArrayBuffer(t),r}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(o&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(i&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(r&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(u&&o&&a(t))this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!u||!ArrayBuffer.prototype.isPrototypeOf(t)&&!c(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=b(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=v(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||t.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var e,r,n,o=v(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,n=m(r=new FileReader),r.readAsText(e),n;if(this._bodyArrayBuffer)return t.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(t,e){var r,n,o=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new y(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new y(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),-1<f.indexOf(n)?n:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function x(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new y(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)}).call(this,r(8).Promise)},function(t,e,r){r(33),t.exports=r(30)}]);
//# sourceMappingURL=ridi_token_refresher.js.map